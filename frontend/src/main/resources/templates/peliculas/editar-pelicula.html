<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Moview - Editar Película</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <main class="bg-gray-100 min-h-screen py-10">
        <div class="container mx-auto px-4">
            <div class="bg-white shadow-md rounded-lg overflow-hidden">
                <h4 class="bg-blue-500 text-white font-bold py-3 px-6 text-xl">Datos de la Película</h4>

                <div class="p-6">
                    <form th:action="@{/peliculas/save}" th:object="${pelicula}" method="post">

                        <!-- Errores -->
                        <div th:if="${#fields.hasErrors('*')}" class="mb-4 p-4 bg-red-100 text-red-700 rounded">
                            <p class="font-semibold">Por favor corrija los siguientes errores:</p>
                            <ul>
                                <li th:each="err : ${#fields.errors('*')}" th:text="${err}" />
                            </ul>
                        </div>

                        <!-- Primera Fila -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="form-group">
                                <label for="titulo" class="block text-sm font-medium text-gray-700">Título</label>
                                <input type="text" id="titulo" name="titulo" th:field="*{titulo}" class="mt-1 p-2 border rounded w-full" placeholder="Título de la película" required>
                            </div>

                            <div class="form-group">
                                <label for="duracion" class="block text-sm font-medium text-gray-700">Duración (minutos)</label>
                                <input type="number" id="duracion" name="duracion" th:field="*{duracion}" class="mt-1 p-2 border rounded w-full" placeholder="Duración en minutos" required>
                            </div>
                        </div>

                        <!-- Segunda Fila -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                            <div class="form-group">
                                <label for="clasificacion" class="block text-sm font-medium text-gray-700">Clasificación</label>
                                <input type="text" id="clasificacion" name="clasificacion" th:field="*{clasificacion}" class="mt-1 p-2 border rounded w-full" placeholder="Clasificación" required>
                            </div>

                            <div class="form-group">
                                <label for="idioma" class="block text-sm font-medium text-gray-700">Idioma</label>
                                <input type="text" id="idioma" name="idioma" th:field="*{idioma}" class="mt-1 p-2 border rounded w-full" placeholder="Idioma" required>
                            </div>
                        </div>

                        <!-- Tercera Fila -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                            <div class="form-group">
                                <label for="categoria" class="block text-sm font-medium text-gray-700">Categoría</label>
                                <select id="categoria" name="categoria" th:field="*{categoria}" class="mt-1 p-2 border rounded w-full">
                                    <option value="Acción">Acción</option>
                                    <option value="Drama">Drama</option>
                                    <option value="Comedia">Comedia</option>
                                    <!-- Otros valores posibles -->
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="formato" class="block text-sm font-medium text-gray-700">Formato</label>
                                <select id="formato" name="formato" th:field="*{formato}" class="mt-1 p-2 border rounded w-full">
                                    <option value="2D">2D</option>
                                    <option value="3D">3D</option>
                                    <option value="IMAX">IMAX</option>
                                    <!-- Otros valores posibles -->
                                </select>
                            </div>
                        </div>

                        <!-- Cuarta Fila -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                            <div class="form-group">
                                <label for="trama" class="block text-sm font-medium text-gray-700">Trama</label>
                                <textarea id="trama" name="trama" th:field="*{trama}" rows="4" class="mt-1 p-2 border rounded w-full" placeholder="Descripción de la trama"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="director" class="block text-sm font-medium text-gray-700">Director</label>
                                <input type="text" id="director" name="director" th:field="*{director}" class="mt-1 p-2 border rounded w-full" placeholder="Nombre del director">
                            </div>
                        </div>

                        <!-- Quinta Fila - Imagen -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                            <div class="form-group">
                                <label for="imagen" class="block text-sm font-medium text-gray-700">Imagen</label>
                                <input type="file" id="imagen" name="imagen" th:field="*{imagen}" class="mt-1 p-2 border rounded w-full">
                            </div>

                            <div class="flex items-center justify-center">
                                <img th:src="@{images/movies/{img} (img=${pelicula.imagen} )}" alt="Imagen de la película" width="220" height="220" />
                            </div>
                        </div>

                        <!-- Botón -->
                        <div class="flex justify-end mt-6">
                            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                                Guardar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script th:src="@{/js/tinymce/tinymce.min.js}"></script>
    <script>

        $(function () {
            $("#fecha").datepicker({dateFormat: 'dd-mm-yy'});
          }
        );

        tinymce.init({
            selector: '#trama',
            plugins: "textcolor, table lists code",
            toolbar: " undo redo | bold italic | alignleft aligncenter alignright alignjustify \n\
                      | bullist numlist outdent indent | forecolor backcolor table code"
        });

    </script>

</html>